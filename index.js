const axios = require('axios');
const env = require('./env');

var studentIds = [
  '1347', 
  '1022',
  '335', 
  '823', 
  '1187', 
  '1145', 
  '1160', 
  '845', 
  '950', 
  '1377', 
  '1416', 
  '1104', 
  '807', 
  '1398', 
  '987', 
  '1411', 
  '1701', 
  '1075', 
  '941', 
  '1483', 
  '1363', 
  '644', 
  '951', 
  '1545', 
  '945', 
  '1595', 
  '994', 
  '830', 
  '912', 
  '912', 
  '1169', 
  '1476', 
  '1593', 
  '1259', 
  '890', 
  '939', 
  '1324', 
  '998', 
  '876', 
  '1087', 
  '904', 
  '879', 
  '1150', 
  '976', 
  '1065', 
  '995', 
  '776', 
  '884', 
  '929', 
  '1029', 
  '1380', 
  '1623', 
  '822', 
  '1423', 
  '908', 
  '1159', 
  '660', 
  '1090', 
  '1609', 
  '1202', 
  '1298', 
  '1004', 
  '1021', 
  '1018', 
  '581', 
  '1382', 
  '952', 
  '663', 
  '1047', 
  '1149', 
  '957', 
  '1062', 
  '1576', 
  '1228', 
  '1052', 
  '1059', 
  '1165', 
  '1172', 
  '1627', 
  '1011', 
  '1490', 
  '1709', 
  '835', 
  '927', 
  '713', 
  '800', 
  '593', 
  '1024', 
  '583', 
  '1240', 
  '774', 
  '1403', 
  '1054', 
  '1232', 
  '1231', 
  '1211', 
  '900', 
  '1012', 
  '1177', 
  '1300', 
  '887', 
  '918', 
  '594', 
  '1289', 
  '781', 
  '928', 
  '638', 
  '1148', 
  '917', 
  '1084', 
  '1178', 
  '1442', 
  '1162', 
  '804'
];

function getData(){
  studentIds.forEach(async id => {
    try {
      
      const response = await axios.get(`https://espmonline.instructure.com//api/v1/courses/49?include[]=course_progress&as_user_id=${id}`, {
        headers: { "Authorization": `${env.CANVAS_API_KEY}` }
      });
      const data = await response.data;
      console.log(data);
    } 
    catch (error) {

      console.error(error)
    }
  })
}

getData();
